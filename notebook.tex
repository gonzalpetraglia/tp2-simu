
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{TP2}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \section{Trabajo Práctico II -
Simulación}\label{trabajo-pruxe1ctico-ii---simulaciuxf3n}

Integrantes: - Matías José Cano - 97925 - Gustavo Giménez - 94038 -
Gonzalo Petraglia - 97811

    \section{Ejercicio 1}\label{ejercicio-1}

Base de datos distribuida:

Base de datos central:

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}75}]:} \PY{k+kn}{from} \PY{n+nn}{scipy.stats} \PY{k+kn}{import} \PY{n}{expon}
         \PY{k+kn}{import} \PY{n+nn}{random}
         
         \PY{k}{def} \PY{n+nf}{accumulate}\PY{p}{(}\PY{n}{probs}\PY{p}{)}\PY{p}{:}
             \PY{n}{acc} \PY{o}{=} \PY{p}{[}\PY{p}{]}
             \PY{n}{accumulated} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{k}{for} \PY{n}{p} \PY{o+ow}{in} \PY{n}{probs}\PY{p}{:}
                 \PY{n}{accumulated} \PY{o}{+}\PY{o}{=} \PY{n}{p}
                 \PY{n}{acc}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{accumulated}\PY{p}{)}
             \PY{k}{return} \PY{n}{acc}
         
         
         \PY{k}{def} \PY{n+nf}{simulate\PYZus{}distributed\PYZus{}db}\PY{p}{(}\PY{n}{mean\PYZus{}time\PYZus{}of\PYZus{}incoming\PYZus{}request}\PY{p}{,} 
                                     \PY{n}{mean\PYZus{}time\PYZus{}by\PYZus{}db}\PY{p}{,} 
                                     \PY{n}{db\PYZus{}probabilities}\PY{p}{,} 
                                     \PY{n}{size}\PY{p}{)}\PY{p}{:}
             
             \PY{k}{assert}\PY{p}{(}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{db\PYZus{}probabilities}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{)}
             \PY{k}{assert}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{mean\PYZus{}time\PYZus{}by\PYZus{}db}\PY{p}{)} \PY{o}{==}  \PY{n+nb}{len}\PY{p}{(}\PY{n}{db\PYZus{}probabilities}\PY{p}{)}\PY{p}{)}
         
             \PY{n}{db\PYZus{}acum\PYZus{}probabilities} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{accumulate}\PY{p}{(}\PY{n}{db\PYZus{}probabilities}\PY{p}{)}\PY{p}{)} \PY{c+c1}{\PYZsh{}\PYZsh{} Obtengo funcion de distribución acumulada a traves de pmf}
             
             \PY{k}{def} \PY{n+nf}{free\PYZus{}at}\PY{p}{(}\PY{n}{old\PYZus{}free\PYZus{}at}\PY{p}{,} \PY{n}{current\PYZus{}time}\PY{p}{,} \PY{n}{time\PYZus{}taken}\PY{p}{)}\PY{p}{:}
                 \PY{k}{return} \PY{n+nb}{max}\PY{p}{(}\PY{n}{old\PYZus{}free\PYZus{}at}\PY{p}{,} \PY{n}{current\PYZus{}time}\PY{p}{)} \PY{o}{+} \PY{n}{time\PYZus{}taken}  \PY{c+c1}{\PYZsh{}\PYZsh{} El tiempo de liberación se incrementa en tiempo de procesado}
                                                                     \PY{c+c1}{\PYZsh{}\PYZsh{} a partir de cuando puedo empezar a procesar la nueva solicitud    }
             \PY{n}{gonna\PYZus{}be\PYZus{}free\PYZus{}at} \PY{o}{=} \PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{]}
             \PY{n}{total\PYZus{}waiting\PYZus{}times\PYZus{}sum} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{n}{waiting\PYZus{}queue\PYZus{}times\PYZus{}sum} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{n}{requests\PYZus{}that\PYZus{}waited\PYZus{}extra} \PY{o}{=} \PY{l+m+mi}{0}
             
             \PY{n}{incoming\PYZus{}requests\PYZus{}delta} \PY{o}{=} \PY{n}{expon}\PY{o}{.}\PY{n}{rvs}\PY{p}{(}\PY{n}{scale}\PY{o}{=}\PY{n}{mean\PYZus{}time\PYZus{}of\PYZus{}incoming\PYZus{}request}\PY{p}{,} \PY{n}{size}\PY{o}{=}\PY{n}{size}\PY{p}{)}
             \PY{n}{times\PYZus{}to\PYZus{}process\PYZus{}request\PYZus{}not\PYZus{}scaled} \PY{o}{=} \PY{n}{expon}\PY{o}{.}\PY{n}{rvs}\PY{p}{(}\PY{n}{size}\PY{o}{=}\PY{n}{size}\PY{p}{)}
             
             \PY{n}{time} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{k}{for} \PY{n}{income\PYZus{}delta}\PY{p}{,} \PY{n}{process\PYZus{}time\PYZus{}not\PYZus{}scaled} \PY{o+ow}{in} \PY{n+nb}{zip}\PY{p}{(}\PY{n}{incoming\PYZus{}requests\PYZus{}delta}\PY{p}{,} 
                                                              \PY{n}{times\PYZus{}to\PYZus{}process\PYZus{}request\PYZus{}not\PYZus{}scaled}\PY{p}{)}\PY{p}{:}
                 
                 \PY{n}{time} \PY{o}{+}\PY{o}{=} \PY{n}{income\PYZus{}delta}
                 
                 \PY{n}{r} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mf}{0.0}\PY{p}{,}\PY{l+m+mf}{1.0}\PY{p}{)}
                 \PY{n}{dbs\PYZus{}turn} \PY{o}{=} \PY{n+nb}{next}\PY{p}{(}\PY{n}{i} \PY{k}{for} \PY{n}{i}\PY{p}{,} \PY{n}{p} \PY{o+ow}{in} \PY{n+nb}{enumerate}\PY{p}{(}\PY{n}{db\PYZus{}acum\PYZus{}probabilities}\PY{p}{)} \PY{k}{if} \PY{n}{r} \PY{o}{\PYZlt{}} \PY{n}{p}\PY{p}{)}
                 \PY{n}{process\PYZus{}time} \PY{o}{=} \PY{n}{process\PYZus{}time\PYZus{}not\PYZus{}scaled} \PY{o}{*} \PY{n}{mean\PYZus{}time\PYZus{}by\PYZus{}db}\PY{p}{[}\PY{n}{dbs\PYZus{}turn}\PY{p}{]}
                 
                 \PY{n}{new\PYZus{}free\PYZus{}time\PYZus{}of\PYZus{}db} \PY{o}{=} \PY{n}{free\PYZus{}at}\PY{p}{(}\PY{n}{gonna\PYZus{}be\PYZus{}free\PYZus{}at}\PY{p}{[}\PY{n}{dbs\PYZus{}turn}\PY{p}{]}\PY{p}{,} \PY{n}{time}\PY{p}{,} \PY{n}{process\PYZus{}time}\PY{p}{)}
                         
                 \PY{n}{total\PYZus{}waiting\PYZus{}time} \PY{o}{=} \PY{n}{new\PYZus{}free\PYZus{}time\PYZus{}of\PYZus{}db} \PY{o}{\PYZhy{}} \PY{n}{time}
                 \PY{n}{gonna\PYZus{}be\PYZus{}free\PYZus{}at}\PY{p}{[}\PY{n}{dbs\PYZus{}turn}\PY{p}{]} \PY{o}{=} \PY{n}{new\PYZus{}free\PYZus{}time\PYZus{}of\PYZus{}db}
                 \PY{n}{total\PYZus{}waiting\PYZus{}times\PYZus{}sum} \PY{o}{+}\PY{o}{=} \PY{n}{total\PYZus{}waiting\PYZus{}time}
                 \PY{n}{waiting\PYZus{}in\PYZus{}queue\PYZus{}time} \PY{o}{=} \PY{n}{total\PYZus{}waiting\PYZus{}time} \PY{o}{\PYZhy{}} \PY{n}{process\PYZus{}time}
                 \PY{n}{waiting\PYZus{}queue\PYZus{}times\PYZus{}sum} \PY{o}{+}\PY{o}{=} \PY{n}{waiting\PYZus{}in\PYZus{}queue\PYZus{}time}
                 
                 \PY{n}{has\PYZus{}to\PYZus{}wait\PYZus{}extra} \PY{o}{=} \PY{p}{(}\PY{n}{waiting\PYZus{}in\PYZus{}queue\PYZus{}time} \PY{o}{\PYZgt{}} \PY{l+m+mf}{0.00001}\PY{p}{)} \PY{c+c1}{\PYZsh{} Delta de seguridad de redondeo}
                 \PY{k}{if} \PY{n}{has\PYZus{}to\PYZus{}wait\PYZus{}extra}\PY{p}{:}
                     \PY{n}{requests\PYZus{}that\PYZus{}waited\PYZus{}extra} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                     
             \PY{k}{return} \PY{n}{waiting\PYZus{}queue\PYZus{}times\PYZus{}sum} \PY{o}{/} \PY{n}{size}\PY{p}{,} \PY{n}{total\PYZus{}waiting\PYZus{}times\PYZus{}sum}\PY{o}{/}\PY{n}{size}\PY{p}{,} \PY{n+nb}{float}\PY{p}{(}\PY{n}{requests\PYZus{}that\PYZus{}waited\PYZus{}extra}\PY{p}{)}\PY{o}{/}\PY{n}{size}
                 
             
         
         \PY{k}{print}\PY{p}{(}
         \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}}
         \PY{l+s+sd}{1) Caso con db distribuida}
         \PY{l+s+sd}{Tiempo medio de espera en cola: \PYZob{}0\PYZcb{} }
         \PY{l+s+sd}{Tiempo medio de espera en cola + procesamiento: \PYZob{}1\PYZcb{} }
         \PY{l+s+sd}{Solicitudes que no esperaron: \PYZob{}2\PYZcb{}}
         \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{o}{*}\PY{n}{simulate\PYZus{}distributed\PYZus{}db}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{0.7}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{0.6}\PY{p}{,} \PY{l+m+mf}{0.4}\PY{p}{]}\PY{p}{,} \PY{l+m+mi}{100000}\PY{p}{)}\PY{p}{)}
         \PY{p}{)}
         
         \PY{k}{print}\PY{p}{(}
         \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}}
         \PY{l+s+sd}{2) Caso con db central}
         \PY{l+s+sd}{Tiempo medio de espera en cola: \PYZob{}0\PYZcb{} }
         \PY{l+s+sd}{Tiempo medio de espera en cola + procesamiento: \PYZob{}1\PYZcb{} }
         \PY{l+s+sd}{Solicitudes que no esperaron: \PYZob{}2\PYZcb{}}
         \PY{l+s+sd}{\PYZdq{}\PYZdq{}\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{o}{*}\PY{n}{simulate\PYZus{}distributed\PYZus{}db}\PY{p}{(}\PY{l+m+mi}{4}\PY{p}{,} \PY{p}{[}\PY{l+m+mf}{0.8}\PY{p}{]}\PY{p}{,} \PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,} \PY{l+m+mi}{100000}\PY{p}{)}\PY{p}{)}
         \PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

1) Caso con db distribuida
Tiempo medio de espera en cola: 0.0951374598911 
Tiempo medio de espera en cola + procesamiento: 0.911714498961 
Solicitudes que no esperaron: 0.10461


2) Caso con db central
Tiempo medio de espera en cola: 0.198858542091 
Tiempo medio de espera en cola + procesamiento: 0.998959951129 
Solicitudes que no esperaron: 0.20251


    \end{Verbatim}

    De los resultados obtenidos se pueden sacar las siguientes conclusiones:

La base de datos distribuida es una opción mas performante en todos los
paremetros medidos. En algunos es hasta 2 veces mejor. Sin embargo, ya
que el tiempo medio total que pasa una solicitud en el sistema no es
menor que la mitad para el caso distribuido con respecto al caso
centralizado, según el criterio dado se sugiere por utilizar la base de
datos centralizada.

    \section{Ejercicio 2}\label{ejercicio-2}

Suponiendo que esto es modelable por una cadena de Markov (es decir que
el proceso es discretizable y que la probabilidad de llegar a un estado
es solo dependiente del estado anterior), que las probabilidades dadas
son independientes, que el servidor puede tener infinitas solicitudes
pendientes, que una solicitud no puede ser resuelta en el mismo
intervalo en el que llega y que no puede suceder que dos solicitudes
lleguen o se resuelvane en un paso, la matriz de transición sera:

\begin{verbatim}
|    r    |    p    |    0    |  0  |...|       
| P = r*q | r*s+p*q |   p*s   |  0  |...|
|    0    |   r*q   | r*s+p*q | p*s |...|
|    .    |    .    |    .    |  .  | . |
|    .    |    .    |    .    |  .  | . |
|    .    |    .    |    .    |  .  | . |
\end{verbatim}

siendo p = 1/30, q = 1/40, r = 1 - p y s = 1 - q

Esta matriz se obtiene definiendo a cada posible estado como la cantidad
de solicitudes en proceso. Dado esto, la matriz puede ser pensada en 2
etapas.

Por un lado, si tenemos mas de una solicitud pendiente, la probabilidad
de que tengamos una solicitud menos pendiente en el siguiente estado es
igual a la probabilidad de que una solicitud se procese y no llegue
otra; como pedimos que estos eventos sean independientes la probabilidad
de esto sera igual al producto de la probabilidad de estos eventos, es
decir r\emph{q. Por otro lado, para que en el siguiente estado haya una
solicitud pendiente más lo que debe suceder es que llegue una solicitud
pero que ninguna haya sido procesada, por lo que la probabilidad sera
p}s. Finalmente, para mantenernos en el mismo estado debe suceder que se
procese una solicitud y llegue otra o que ninguna de estas dos cosas
suceda, por lo que la probabilidad sera r\emph{s+p}q. Como se puede
observar, y es esperable, la suma de las probabilidades de todas las
transiciones es 1.

Por otro lado, si no hay solicitudes pendientes, la probabilidad de
tener una solicitud en el siguiente estado es igual a la probabilidad de
que llegue una solicitud, ya que son eventos equivalentes; y la
probabilidad de seguir teniendo 0 solicitudes es la probabilidad es
igual a uno menos la anterior probabilidad.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}76}]:} \PY{k+kn}{import} \PY{n+nn}{matplotlib.pyplot} \PY{k+kn}{as} \PY{n+nn}{plt}
         
         \PY{k}{def} \PY{n+nf}{request\PYZus{}processed}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{random}\PY{o}{.}\PY{n}{random}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{l+m+mf}{1.0}\PY{o}{/}\PY{l+m+mi}{30}
             
         \PY{k}{def} \PY{n+nf}{incoming\PYZus{}request}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{random}\PY{o}{.}\PY{n}{random}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZlt{}} \PY{l+m+mf}{1.0}\PY{o}{/}\PY{l+m+mi}{40}
         
         \PY{n}{steps} \PY{o}{=} \PY{n+nb}{int}\PY{p}{(}\PY{l+m+mi}{1000} \PY{o}{/} \PY{l+m+mf}{0.01}\PY{p}{)}
         
         \PY{n}{pending\PYZus{}requests} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{states} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{steps}\PY{p}{)}\PY{p}{:}
             \PY{n}{states}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{pending\PYZus{}requests}\PY{p}{)}
             \PY{k}{if} \PY{n}{pending\PYZus{}requests} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{o+ow}{and} \PY{n}{request\PYZus{}processed}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                 \PY{n}{pending\PYZus{}requests} \PY{o}{\PYZhy{}}\PY{o}{=} \PY{l+m+mi}{1}
             
             \PY{k}{if} \PY{n}{pending\PYZus{}requests} \PY{o}{\PYZlt{}} \PY{l+m+mi}{29} \PY{o+ow}{and} \PY{n}{incoming\PYZus{}request}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                 \PY{n}{pending\PYZus{}requests} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{states}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_5_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}77}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{states}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_6_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}78}]:} \PY{n}{times\PYZus{}without\PYZus{}request} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n+nb}{list}\PY{p}{(}\PY{n+nb}{filter}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{x} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{,} \PY{n}{states}\PY{p}{)}\PY{p}{)}\PY{p}{)}
         
         \PY{k}{print} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{El porcentaje de tiempo que el servidor se encuentra sin procesar solicitudes es de \PYZob{}\PYZcb{}}\PY{l+s+s1}{\PYZpc{}}\PY{l+s+s1}{\PYZsq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{float}\PY{p}{(}\PY{n}{times\PYZus{}without\PYZus{}request}\PY{p}{)}\PY{o}{/}\PY{n+nb}{len}\PY{p}{(}\PY{n}{states}\PY{p}{)}\PY{o}{*}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
El porcentaje de tiempo que el servidor se encuentra sin procesar solicitudes es de 25.892\%

    \end{Verbatim}

    \section{Ejercicio 3}\label{ejercicio-3}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}79}]:} \PY{k+kn}{from} \PY{n+nn}{mpl\PYZus{}toolkits.mplot3d} \PY{k+kn}{import} \PY{n}{Axes3D}
         
         \PY{k}{def} \PY{n+nf}{calculate\PYZus{}new\PYZus{}state}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{z}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{x}\PY{o}{/}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{y}\PY{p}{,} \PY{n}{y} \PY{o}{\PYZhy{}} \PY{n}{x}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{z} \PY{o}{\PYZhy{}} \PY{n}{x} \PY{o}{\PYZhy{}} \PY{n}{y}
         
         \PY{n}{x\PYZus{}seeds} \PY{o}{=} \PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{1.0}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{]}
         \PY{n}{y\PYZus{}seeds} \PY{o}{=} \PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{1.0}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{]}
         \PY{n}{z\PYZus{}seeds} \PY{o}{=} \PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{1.0}\PY{p}{,} \PY{l+m+mf}{1.0}\PY{p}{]}
         
         \PY{n}{fig}\PY{p}{,} \PY{n}{axs} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{3}\PY{p}{,} \PY{l+m+mi}{3}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,} \PY{l+m+mi}{15}\PY{p}{)}\PY{p}{,} \PY{n}{subplot\PYZus{}kw}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{projection}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{3d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{)}
         \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{hspace} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{wspace}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{axs} \PY{o}{=} \PY{n}{axs}\PY{o}{.}\PY{n}{ravel}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{k}{for} \PY{n}{x\PYZus{}seed} \PY{o+ow}{in} \PY{n}{x\PYZus{}seeds}\PY{p}{:}
             \PY{k}{for} \PY{n}{y\PYZus{}seed} \PY{o+ow}{in} \PY{n}{y\PYZus{}seeds}\PY{p}{:}
                 \PY{k}{for} \PY{n}{z\PYZus{}seed} \PY{o+ow}{in} \PY{n}{z\PYZus{}seeds}\PY{p}{:}       
                     \PY{n}{x} \PY{o}{=}  \PY{n}{x\PYZus{}seed}
                     \PY{n}{xs} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{]}
                     \PY{n}{y} \PY{o}{=} \PY{n}{y\PYZus{}seed}
                     \PY{n}{ys} \PY{o}{=} \PY{p}{[}\PY{n}{y}\PY{p}{]}
                     \PY{n}{z} \PY{o}{=} \PY{n}{z\PYZus{}seed}
                     \PY{n}{zs} \PY{o}{=} \PY{p}{[}\PY{n}{z}\PY{p}{]}
                     \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{:}
                         \PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{z} \PY{o}{=} \PY{n}{calculate\PYZus{}new\PYZus{}state}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{z}\PY{p}{)}
                         \PY{n}{xs}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{x}\PY{p}{)}
                         \PY{n}{ys}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{y}\PY{p}{)}
                         \PY{n}{zs}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{z}\PY{p}{)}
                     \PY{n}{axs}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{xs}\PY{p}{,}\PY{n}{ys}\PY{p}{,}\PY{n}{zs}\PY{p}{)}
                     \PY{n}{axs}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Seeds = (\PYZob{}0\PYZcb{},\PYZob{}1\PYZcb{},\PYZob{}2\PYZcb{})}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{x\PYZus{}seed}\PY{p}{,} \PY{n}{y\PYZus{}seed}\PY{p}{,} \PY{n}{z\PYZus{}seed}\PY{p}{)}\PY{p}{)}
                     \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_9_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    Se nota que todos presentan el mismo comportamiento salvo por un
escalamiento y/o desplazamiento, presentan un ciclo limite. Esto es
esperable ya que las matrices para todos los sistemas son identicos
(salvo por los seeds), y lineales; y como los sistemas lineales
presentan el mismo comportamiento a lo largo de todo el espacio de
fases, el comportamiento deberia ser similar para todo conjunto inicial
de seeds.

Ademas, el ciclo limite es esperable tambien dado que los autovalores
dominantes de la matriz que define al sistema* son de modulo igual a 1 y
son complejos. Los autovalores son

\[ 0 , \frac{1}{2}i\left(\sqrt{3}+i\right),\:-\frac{1}{2}i\left(\sqrt{3}-i\right) \]

\section{Puntos fijos}\label{puntos-fijos}

Tienen que cumplir las ecuaciones

\[ 2 \cdot x_{t} = x_{t-1} + 2 \cdot y_{t-1} \]

\[ y_{t}  = y_{t-1} - \frac{x_{t-1}}{2} \]

\[ z_{t} = z_{t-1} - x_{t-1} - y_{t-1} \]

Al despejar:

\[ 0 = -x + 2 \cdot y \]

\[ 0 = -x/2 \]

\[ 0 = - x - y \]

Por lo tanto:

\begin{itemize}
\tightlist
\item
  \(x = 0\)
\item
  \(y = 0\)
\item
  \(z\) puede tomar cualquier valor
\end{itemize}

Por lo tanto, los puntos fijos del sistema se encuentran en el eje z.

Esto se debe a que si bien, el sistema es lineal y según la teoría estos
sistemas deberian de tener un solo punto fijo, la matriz que define al
sistema* es no inversible, por lo que realmente tenemos un subespacio de
dimensión 1 (cantidad de ecuaciones no L.I) de puntos fijos.

Nota esta no invertibilidad se ve facilmente teniendo en cuenta que si
z(t) = z(t-1) (propiedad de punto fijo), z se puede cancelar en todas
las ecuaciones.

Esto se ve en los siguientes gráficos donde los seeds se dan sobre el
eje y sucede que no se ve nada, ya que realmente las sucesivas
iteraciones caen en el mismo punto

Nota*: La matriz que define al sistema es la siguiente:

\begin{pmatrix}-1&2&0\\ \:-\frac{1}{2}&0&0\\ \:-1&-1&0\end{pmatrix}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}80}]:} \PY{c+c1}{\PYZsh{}Compruebo lo enunciado antes}
         
         \PY{k}{def} \PY{n+nf}{calculate\PYZus{}new\PYZus{}state}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{z}\PY{p}{)}\PY{p}{:}
             \PY{k}{return} \PY{n}{x}\PY{o}{/}\PY{l+m+mi}{2} \PY{o}{+} \PY{n}{y}\PY{p}{,} \PY{n}{y} \PY{o}{\PYZhy{}} \PY{n}{x}\PY{o}{/}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{z} \PY{o}{\PYZhy{}} \PY{n}{x} \PY{o}{\PYZhy{}} \PY{n}{y}
         
         \PY{n}{x\PYZus{}seeds} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.0}\PY{p}{]}
         \PY{n}{y\PYZus{}seeds} \PY{o}{=} \PY{p}{[}\PY{l+m+mf}{0.0}\PY{p}{]}
         \PY{n}{z\PYZus{}seeds} \PY{o}{=} \PY{n+nb}{range}\PY{p}{(}\PY{o}{\PYZhy{}}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{10}\PY{p}{)}
         
         \PY{n}{fig}\PY{p}{,} \PY{n}{axs} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{16}\PY{p}{,} \PY{l+m+mi}{20}\PY{p}{)}\PY{p}{,} \PY{n}{subplot\PYZus{}kw}\PY{o}{=}\PY{p}{\PYZob{}}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{projection}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{3d}\PY{l+s+s1}{\PYZsq{}}\PY{p}{\PYZcb{}}\PY{p}{)}
         \PY{n}{fig}\PY{o}{.}\PY{n}{subplots\PYZus{}adjust}\PY{p}{(}\PY{n}{hspace} \PY{o}{=} \PY{o}{.}\PY{l+m+mi}{2}\PY{p}{,} \PY{n}{wspace}\PY{o}{=}\PY{o}{.}\PY{l+m+mi}{2}\PY{p}{)}
         \PY{n}{axs} \PY{o}{=} \PY{n}{axs}\PY{o}{.}\PY{n}{ravel}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{k}{for} \PY{n}{x\PYZus{}seed} \PY{o+ow}{in} \PY{n}{x\PYZus{}seeds}\PY{p}{:}
             \PY{k}{for} \PY{n}{y\PYZus{}seed} \PY{o+ow}{in} \PY{n}{y\PYZus{}seeds}\PY{p}{:}
                 \PY{k}{for} \PY{n}{z\PYZus{}seed} \PY{o+ow}{in} \PY{n}{z\PYZus{}seeds}\PY{p}{:}
                     \PY{n}{x} \PY{o}{=}  \PY{n}{x\PYZus{}seed}
                     \PY{n}{xs} \PY{o}{=} \PY{p}{[}\PY{n}{x}\PY{p}{]}
                     \PY{n}{y} \PY{o}{=} \PY{n}{y\PYZus{}seed}
                     \PY{n}{ys} \PY{o}{=} \PY{p}{[}\PY{n}{y}\PY{p}{]}
                     \PY{n}{z} \PY{o}{=} \PY{n}{z\PYZus{}seed}
                     \PY{n}{zs} \PY{o}{=} \PY{p}{[}\PY{n}{z}\PY{p}{]}
                     \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{:}
                         \PY{n}{x}\PY{p}{,} \PY{n}{y}\PY{p}{,} \PY{n}{z} \PY{o}{=} \PY{n}{calculate\PYZus{}new\PYZus{}state}\PY{p}{(}\PY{n}{x}\PY{p}{,}\PY{n}{y}\PY{p}{,}\PY{n}{z}\PY{p}{)}
                         \PY{n}{xs}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{x}\PY{p}{)}
                         \PY{n}{ys}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{y}\PY{p}{)}
                         \PY{n}{zs}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{z}\PY{p}{)}
                         
                     \PY{n}{axs}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{xs}\PY{p}{,}\PY{n}{ys}\PY{p}{,}\PY{n}{zs}\PY{p}{)}
                     \PY{n}{axs}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Seeds = (\PYZob{}0\PYZcb{},\PYZob{}1\PYZcb{},\PYZob{}2\PYZcb{})}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{x\PYZus{}seed}\PY{p}{,} \PY{n}{y\PYZus{}seed}\PY{p}{,} \PY{n}{z\PYZus{}seed}\PY{p}{)}\PY{p}{)}
                     \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
         
         \PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_11_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \section{Ejercicio 4}\label{ejercicio-4}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}81}]:} \PY{k+kn}{import} \PY{n+nn}{random}
         \PY{k+kn}{import} \PY{n+nn}{simpy}
         
         
         \PY{k}{def} \PY{n+nf}{source}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{cajero}\PY{p}{)}\PY{p}{:}
             \PY{k}{while} \PY{n+nb+bp}{True}\PY{p}{:}
                 \PY{k}{global} \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line}
                 \PY{k}{global} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line}
                 \PY{k}{if} \PY{n}{env}\PY{o}{.}\PY{n}{now} \PY{o}{\PYZlt{}} \PY{l+m+mi}{7200}\PY{p}{:}
                     \PY{n}{interval} \PY{o}{=} \PY{l+m+mi}{240}
                 \PY{k}{elif} \PY{n}{env}\PY{o}{.}\PY{n}{now} \PY{o}{\PYZlt{}} \PY{l+m+mi}{18000}\PY{p}{:}
                     \PY{n}{interval} \PY{o}{=} \PY{l+m+mi}{120}
                 \PY{k}{else}\PY{p}{:}
                     \PY{n}{interval} \PY{o}{=} \PY{l+m+mi}{360}
                 \PY{n}{c} \PY{o}{=} \PY{n}{customer}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{cajero}\PY{p}{)}
                 \PY{n}{env}\PY{o}{.}\PY{n}{process}\PY{p}{(}\PY{n}{c}\PY{p}{)}
                 \PY{n}{next\PYZus{}arrive} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{expovariate}\PY{p}{(}\PY{l+m+mf}{1.0} \PY{o}{/} \PY{n}{interval}\PY{p}{)}
                 \PY{k}{yield} \PY{n}{env}\PY{o}{.}\PY{n}{timeout}\PY{p}{(}\PY{n}{next\PYZus{}arrive}\PY{p}{)}
                 \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                 \PY{k}{if} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{\PYZgt{}} \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line}\PY{p}{:}
                     \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line}
         
         
         \PY{k}{def} \PY{n+nf}{customer}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{cajero}\PY{p}{)}\PY{p}{:}
             \PY{n}{arrive} \PY{o}{=} \PY{n}{env}\PY{o}{.}\PY{n}{now}
             \PY{c+c1}{\PYZsh{} print(\PYZsq{}Client enters\PYZsq{})}
         
             \PY{k}{with} \PY{n}{cajero}\PY{o}{.}\PY{n}{request}\PY{p}{(}\PY{p}{)} \PY{k}{as} \PY{n}{req}\PY{p}{:}
                 \PY{k}{yield} \PY{n}{req}
                 \PY{k}{global} \PY{n}{max\PYZus{}wait}
                 \PY{k}{global} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line}
                 \PY{n}{wait} \PY{o}{=} \PY{n}{env}\PY{o}{.}\PY{n}{now} \PY{o}{\PYZhy{}} \PY{n}{arrive} \PY{c+c1}{\PYZsh{} Tiempo de espera en la cola}
                 \PY{k}{if} \PY{n}{wait} \PY{o}{\PYZgt{}} \PY{n}{max\PYZus{}wait}\PY{p}{:}
                     \PY{n}{max\PYZus{}wait} \PY{o}{=} \PY{n}{wait}
                 
                 \PY{n}{r} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mf}{0.0}\PY{p}{,}\PY{l+m+mf}{1.0}\PY{p}{)}
                 \PY{k}{if} \PY{n}{r} \PY{o}{\PYZlt{}} \PY{l+m+mf}{0.1}\PY{p}{:} 
                     \PY{n}{time} \PY{o}{=}  \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{60}\PY{p}{,} \PY{l+m+mi}{420}\PY{p}{)}
                 \PY{k}{elif} \PY{n}{r} \PY{o}{\PYZlt{}} \PY{l+m+mf}{0.8}\PY{p}{:}
                     \PY{n}{time} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{60}\PY{p}{,}\PY{l+m+mi}{180}\PY{p}{)}
                 \PY{k}{else}\PY{p}{:}
                     \PY{n}{time} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{60}\PY{p}{,}\PY{l+m+mi}{300}\PY{p}{)}
                 
                 \PY{k}{yield} \PY{n}{env}\PY{o}{.}\PY{n}{timeout}\PY{p}{(}\PY{n}{time}\PY{p}{)}
         
                 \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{\PYZhy{}}\PY{o}{=} \PY{l+m+mi}{1}
         
         
         \PY{c+c1}{\PYZsh{} Setup and start the simulation}
         \PY{n}{env} \PY{o}{=} \PY{n}{simpy}\PY{o}{.}\PY{n}{Environment}\PY{p}{(}\PY{p}{)}
         
         \PY{n}{max\PYZus{}wait} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{c+c1}{\PYZsh{} Start processes and run}
         \PY{n}{cajero} \PY{o}{=} \PY{n}{simpy}\PY{o}{.}\PY{n}{Resource}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{capacity}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}
         \PY{n}{env}\PY{o}{.}\PY{n}{process}\PY{p}{(}\PY{n}{source}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{cajero}\PY{p}{)}\PY{p}{)}
         \PY{n}{env}\PY{o}{.}\PY{n}{run}\PY{p}{(}\PY{n}{until}\PY{o}{=}\PY{l+m+mi}{32400}\PY{p}{)} \PY{c+c1}{\PYZsh{} Segundos desde las 10.00 hasta las 19.00}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}82}]:} \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Max waiting time in seconds: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{max\PYZus{}wait}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Max number of clients in the line: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}clients\PYZus{}in\PYZus{}the\PYZus{}line}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Max waiting time in seconds: 6208.55942318
Max number of clients in the line: 39

    \end{Verbatim}

    \section{Ejercicio 5}\label{ejercicio-5}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}83}]:} \PY{n}{max\PYZus{}wait} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{number\PYZus{}of\PYZus{}requests} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{wait\PYZus{}sum} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         
         \PY{k+kn}{import} \PY{n+nn}{random}
         \PY{k+kn}{import} \PY{n+nn}{simpy}
         
         \PY{k}{def} \PY{n+nf}{source}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{servers}\PY{p}{)}\PY{p}{:}
             \PY{k}{while} \PY{n+nb+bp}{True}\PY{p}{:}
                 \PY{k}{global} \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}
                 \PY{k}{global} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}
                 \PY{n}{c} \PY{o}{=} \PY{n}{solicitud}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{servers}\PY{p}{)}
                 \PY{n}{env}\PY{o}{.}\PY{n}{process}\PY{p}{(}\PY{n}{c}\PY{p}{)}
                 \PY{n}{t} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{expovariate}\PY{p}{(}\PY{l+m+mf}{1.0}\PY{o}{/}\PY{l+m+mf}{45.0}\PY{p}{)}
                 \PY{k}{yield} \PY{n}{env}\PY{o}{.}\PY{n}{timeout}\PY{p}{(}\PY{n}{t}\PY{p}{)}
                 \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                 \PY{k}{if} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{\PYZgt{}} \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}\PY{p}{:}
                     \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}
         
         \PY{k}{def} \PY{n+nf}{solicitud}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{servers}\PY{p}{)}\PY{p}{:}
             \PY{n}{arrive} \PY{o}{=} \PY{n}{env}\PY{o}{.}\PY{n}{now}
             
             \PY{k}{with} \PY{n+nb}{next}\PY{p}{(}\PY{n}{servers}\PY{p}{)}\PY{o}{.}\PY{n}{request}\PY{p}{(}\PY{p}{)} \PY{k}{as} \PY{n}{req}\PY{p}{:}
                 \PY{k}{yield} \PY{n}{req}
                 \PY{k}{global} \PY{n}{max\PYZus{}wait}
                 \PY{k}{global} \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}
                 \PY{k}{global} \PY{n}{wait\PYZus{}sum}
                 \PY{k}{global} \PY{n}{number\PYZus{}of\PYZus{}requests}
                 \PY{n}{wait} \PY{o}{=} \PY{n}{env}\PY{o}{.}\PY{n}{now} \PY{o}{\PYZhy{}} \PY{n}{arrive}
                 \PY{k}{if} \PY{n}{wait} \PY{o}{\PYZgt{}} \PY{n}{max\PYZus{}wait}\PY{p}{:}
                     \PY{n}{max\PYZus{}wait} \PY{o}{=} \PY{n}{wait}
                 \PY{n}{wait\PYZus{}sum} \PY{o}{+}\PY{o}{=} \PY{n}{wait}  
                 \PY{n}{number\PYZus{}of\PYZus{}requests} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                 
                     
                 \PY{n}{r} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mf}{0.0}\PY{p}{,}\PY{l+m+mf}{1.0}\PY{p}{)}
                 \PY{k}{if} \PY{n}{r} \PY{o}{\PYZlt{}} \PY{l+m+mf}{0.7}\PY{p}{:}                         
                     \PY{n}{time} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{60}\PY{p}{,} \PY{l+m+mi}{180}\PY{p}{)}  \PY{c+c1}{\PYZsh{} A: 120 +/\PYZhy{} 60}
                 \PY{k}{elif} \PY{n}{r} \PY{o}{\PYZlt{}} \PY{l+m+mf}{0.9}\PY{p}{:}                       
                     \PY{n}{time} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{120}\PY{p}{,} \PY{l+m+mi}{360}\PY{p}{)} \PY{c+c1}{\PYZsh{} B: 240 +/\PYZhy{} 120}
                 \PY{k}{else}\PY{p}{:}                            
                     \PY{n}{time} \PY{o}{=} \PY{n}{random}\PY{o}{.}\PY{n}{uniform}\PY{p}{(}\PY{l+m+mi}{200}\PY{p}{,} \PY{l+m+mi}{800}\PY{p}{)} \PY{c+c1}{\PYZsh{} C: 500 +/\PYZhy{} 300}
         
                 \PY{k}{yield} \PY{n}{env}\PY{o}{.}\PY{n}{timeout}\PY{p}{(}\PY{n}{time}\PY{p}{)}
                 \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{\PYZhy{}}\PY{o}{=} \PY{l+m+mi}{1} 
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}84}]:} \PY{k}{def} \PY{n+nf}{servers\PYZus{}por\PYZus{}menor\PYZus{}solicitud}\PY{p}{(}\PY{n}{servers}\PY{p}{)}\PY{p}{:}
             \PY{k}{while} \PY{n+nb+bp}{True}\PY{p}{:}
                 \PY{k}{yield} \PY{n+nb}{min}\PY{p}{(}\PY{n}{servers}\PY{p}{,} \PY{n}{key} \PY{o}{=} \PY{k}{lambda} \PY{n}{server}\PY{p}{:} \PY{n+nb}{len}\PY{p}{(}\PY{n}{server}\PY{o}{.}\PY{n}{queue}\PY{p}{)}\PY{p}{)}
         
         \PY{k}{def} \PY{n+nf}{servers\PYZus{}por\PYZus{}orden}\PY{p}{(}\PY{n}{servers}\PY{p}{)}\PY{p}{:}
             \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
             \PY{k}{while} \PY{n+nb+bp}{True}\PY{p}{:}
                 \PY{k}{yield} \PY{n}{servers}\PY{p}{[}\PY{n}{i}\PY{o}{\PYZpc{}}\PY{k}{len}(servers)]
                 \PY{n}{i}\PY{o}{+}\PY{o}{=}\PY{l+m+mi}{1}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}85}]:} \PY{n}{max\PYZus{}wait} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{number\PYZus{}of\PYZus{}requests} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{wait\PYZus{}sum} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{env} \PY{o}{=} \PY{n}{simpy}\PY{o}{.}\PY{n}{Environment}\PY{p}{(}\PY{p}{)}
         \PY{n}{servers} \PY{o}{=} \PY{p}{[}\PY{n}{simpy}\PY{o}{.}\PY{n}{Resource}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{capacity}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{]}
         
         \PY{c+c1}{\PYZsh{} Start processes and run}
         \PY{n}{env}\PY{o}{.}\PY{n}{process}\PY{p}{(}\PY{n}{source}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{servers\PYZus{}por\PYZus{}menor\PYZus{}solicitud}\PY{p}{(}\PY{n}{servers}\PY{p}{)}\PY{p}{)}\PY{p}{)}
         \PY{n}{env}\PY{o}{.}\PY{n}{run}\PY{p}{(}\PY{n}{until}\PY{o}{=}\PY{l+m+mi}{10}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{6}\PY{p}{)}
         
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Max waiting time in seconds: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{max\PYZus{}wait}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Average waiting time in seconds: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{float}\PY{p}{(}\PY{n}{wait\PYZus{}sum}\PY{p}{)} \PY{o}{/} \PY{n}{number\PYZus{}of\PYZus{}requests}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Max number of requests in the line: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Max waiting time in seconds: 1479.91128058
Average waiting time in seconds: 171.532339689
Max number of requests in the line: 29

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}86}]:} \PY{n}{max\PYZus{}wait} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{number\PYZus{}of\PYZus{}requests} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{wait\PYZus{}sum} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{current\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line} \PY{o}{=} \PY{l+m+mi}{0}
         \PY{n}{env} \PY{o}{=} \PY{n}{simpy}\PY{o}{.}\PY{n}{Environment}\PY{p}{(}\PY{p}{)}
         \PY{n}{servers} \PY{o}{=} \PY{p}{[}\PY{n}{simpy}\PY{o}{.}\PY{n}{Resource}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{capacity}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{)}\PY{p}{]}
         
         \PY{c+c1}{\PYZsh{} Start processes and run}
         \PY{n}{env}\PY{o}{.}\PY{n}{process}\PY{p}{(}\PY{n}{source}\PY{p}{(}\PY{n}{env}\PY{p}{,} \PY{n}{servers\PYZus{}por\PYZus{}orden}\PY{p}{(}\PY{n}{servers}\PY{p}{)}\PY{p}{)}\PY{p}{)}
         \PY{n}{env}\PY{o}{.}\PY{n}{run}\PY{p}{(}\PY{n}{until}\PY{o}{=}\PY{l+m+mi}{10}\PY{o}{*}\PY{o}{*}\PY{l+m+mi}{6}\PY{p}{)}
         
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Max waiting time in seconds: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{max\PYZus{}wait}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Average waiting time in seconds: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n+nb}{float}\PY{p}{(}\PY{n}{wait\PYZus{}sum}\PY{p}{)} \PY{o}{/} \PY{n}{number\PYZus{}of\PYZus{}requests}\PY{p}{)}\PY{p}{)}
         \PY{k}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Max number of requests in the line: \PYZob{}\PYZcb{}}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{max\PYZus{}number\PYZus{}of\PYZus{}request\PYZus{}in\PYZus{}the\PYZus{}line}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Max waiting time in seconds: 2554.94169701
Average waiting time in seconds: 262.138168565
Max number of requests in the line: 35

    \end{Verbatim}

    Como se puede ver, conviene usar el método de encolar en el servidor que
tiene menos pedidos. Esto se concluye a partir de que todas las metricas
tomadas, tiempo de espera promedio, tiempo de espera máximo y cantidad
máxima de solicitudes en cola, son mayores, es decir peores, para el
caso de la distribución Round Robin. Tener en cuenta que esto se
concluye no teniendo en cuenta que la distribución por carga no incluye
ningun overhead, lo que no es esperable en la práctica, por lo que ante
un escenario mas realista donde medir la carga nos lleve, por ejemplo 80
ms este resultado se invertiria.


    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
